(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".input"),t=document.querySelector(".ul"),l=document.querySelector(".control-panel"),n=document.querySelector(".complete"),a=document.querySelector(".active"),c=document.querySelector(".all"),s=document.querySelector(".clear");let o={},r=0;localStorage.getItem("Ukey")&&(o=JSON.parse(localStorage.getItem("Ukey")),m());for(let e=0;e<=r;e++)for(let[t,l]of Object.entries(o))l==e&&u(t,localStorage.getItem(t));function i(){document.querySelectorAll(".checkbox").forEach((e=>{!function(e){let t=`${e.parentElement.parentElement.lastElementChild.dataset.local}isChecked`;localStorage.getItem(t)&&(e.checked=!0,e.parentElement.parentElement.classList.add("pop"),g())}(e),e.addEventListener("change",(e=>{e.target.checked?(e.target.parentElement.parentElement.classList.add("pop"),g(),d(),S(e.target,!0,!0)):(e.target.parentElement.parentElement.classList.remove("pop"),g(),d(),S(e.target,!0,!1)),d()}),!1)}))}function d(e){const t=document.querySelector(".counter"),l=document.querySelectorAll(".tdl-item"),s=[];l.forEach((e=>{c.classList.contains("active-btn")?s.push(e):n.classList.contains("active-btn")?e.classList.contains("pop")&&s.push(e):a.classList.contains("active-btn")&&(e.classList.contains("hide")||0!=e.firstElementChild.firstElementChild.checked||s.push(e))}));const o=document.createElement("span");o.innerHTML=`${s.length}`,t.prepend(o);const r=t.querySelectorAll("span");r.length>=2&&t.removeChild(r[1]);const i=document.querySelector(".control-panel");0==l.length&&i.classList.add("hide")}function m(){let e=[];for(let[t,l]of Object.entries(o)){e.push(l);for(let l=0;l<e.length;l++)l==e.length-1&&(o[t]=l);E()}r=Math.max(...e)}function u(e,n){const a=document.createElement("li");a.classList.add("tdl-item"),a.innerHTML=`\n    <label class="label">\n      <input class="checkbox" type="checkbox">\n      <span class="fake"></span>\n      <img class="crist hide" src="./img/Cancel.png" alt="crist">\n    </label>\n    <span data-local='${e}' class="text">${n}</span>\n    `,t.insertBefore(a,l),i(),function(e){const t=document.querySelectorAll(".crist");e.addEventListener("mouseenter",(e=>{e.target.firstElementChild.lastElementChild.classList.remove("hide")})),e.addEventListener("mouseleave",(e=>{e.target.firstElementChild.lastElementChild.classList.add("hide")})),t.forEach((e=>{e.addEventListener("click",(e=>{console.log(),S(e.target.previousElementSibling,!1,!1),h(e.target.parentElement.nextElementSibling.dataset.local),E(),e.target.parentElement.parentElement.remove(),d()}))}))}(a),d(),y()}function h(e){localStorage.removeItem(e),delete o[e]}function E(){let e=JSON.stringify(o);localStorage.setItem("Ukey",e)}function p(e){const t=document.createElement("input");let l=e.target.parentElement;t.classList.add("changer"),t.value=`${l.lastElementChild.textContent}`,l.firstElementChild.style.display="none",l.lastElementChild.style.display="none";let n=l.lastElementChild.dataset.local,a=o[l.lastElementChild.dataset.local];var c,s,r;l.append(t),c=t,s=e.target.parentElement,r=e.target.parentElement,document.addEventListener("keydown",(e=>{"Escape"===e.code&&c&&(c.remove(),s.firstElementChild.style.display="block",r.lastElementChild.style.display="block",y())})),document.addEventListener("click",(e=>{e.target!=c&&(c.remove(),s.firstElementChild.style.display="block",r.lastElementChild.style.display="block",y())})),t.addEventListener("change",(e=>{l.children[1].textContent=`${t.value}`,o[n]=a,localStorage.setItem(n,t.value),E(),l.firstElementChild.style.display="block",l.children[1].style.display="block",e.target.remove(),y()}))}function g(){document.querySelector(".tdl-item.pop")?s.classList.remove("hide"):s.classList.add("hide")}d(),e.addEventListener("change",(e=>{!function(e){const t=e.target.value.slice(0,8)+"a";u(t,e.target.value),document.querySelector(".control-panel").classList.remove("hide"),document.querySelectorAll(".tdl-item").forEach(((e,l)=>{o[t]=l,E(),m()})),localStorage.setItem(`${t}`,e.target.value),y(),e.target.value="",i()}(e)})),c.addEventListener("click",(()=>{document.querySelectorAll(".tdl-item").forEach(((e,t)=>{e.classList.remove("hide"),d()}))})),a.addEventListener("click",(()=>{document.querySelectorAll(".tdl-item").forEach((e=>{e.classList.contains("pop")?(e.classList.add("hide"),d()):(e.classList.remove("hide"),d())}))})),n.addEventListener("click",(()=>{document.querySelectorAll(".tdl-item").forEach((e=>{e.classList.contains("pop")?(e.classList.remove("hide"),d()):(e.classList.add("hide"),d())}))})),s.addEventListener("click",(()=>{document.querySelectorAll(".tdl-item").forEach((e=>{e.classList.contains("pop")&&(S(e.firstElementChild.firstElementChild,!0,!1),h(e.lastElementChild.dataset.local),E(),e.remove(),d())})),s.classList.add("hide")}));const L=document.querySelector(".arrow"),v=[!1];function y(){document.querySelectorAll(".tdl-item .text").forEach((e=>{e.addEventListener("dblclick",p,{once:!0}),e.addEventListener("selectstart",(e=>{e.preventDefault()}))}))}L.addEventListener("click",(()=>{document.querySelectorAll(".checkbox").forEach((e=>{v[v.length-1]?(e.checked=!1,e.parentElement.parentElement.classList.remove("pop")):(e.checked=!0,e.parentElement.parentElement.classList.add("pop"))})),v[v.length-1]?v.push(!1):v.push(!0)}));const f=document.querySelector(".control-block").querySelectorAll("button");function S(e,t,l){let n=`${e.parentElement.parentElement.lastElementChild.dataset.local}isChecked`;l?localStorage.getItem(n)||localStorage.setItem(n,t):localStorage.removeItem(n)}f.forEach((e=>{e.addEventListener("click",(e=>{f.forEach((e=>e.classList.remove("active-btn"))),e.target.classList.toggle("active-btn"),d()}))})),document.addEventListener("click",(e=>{"LABEL"==e.target.tagName&&e.target.classList.toggle("checked")}))}()}))})();
//# sourceMappingURL=bundle.js.map